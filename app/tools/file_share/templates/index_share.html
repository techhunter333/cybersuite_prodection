{% extends "base.html" %}
{% block header %}Secure File Share{% endblock %}

{% block content %}
<div class="tool-wrapper" style="max-width: 700px;">
    <div style="text-align: center; margin-bottom: 30px;">
        <div style="font-size: 3rem; color: var(--accent); margin-bottom: 10px;"><i class="fas fa-share-square"></i></div>
        <h2>Secure File Transfer</h2>
        <p style="color: var(--text-muted);">Encrypt and share files. Zero-Knowledge.</p>
    </div>

    <form id="upload-form">
        <div class="form-group file-drop-area">
            <label for="fileInput" style="cursor: pointer;">
                <i class="fas fa-cloud-upload-alt" style="font-size: 2rem; color: var(--accent); display: block; margin-bottom: 10px;"></i>
                <span id="file-label">Click to Select File</span>
            </label>
            <input type="file" id="fileInput" style="display: none;" required>
        </div>

        <button type="submit" id="upload-btn" class="btn-primary">
            <i class="fas fa-lock"></i> Encrypt & Upload
        </button>
    </form>

    <div id="progress-container" style="display:none; margin-top: 20px;">
        <p id="status-text" style="text-align: center; font-weight: 600; color: var(--accent);">Encrypting...</p>
        <div style="width: 100%; background: var(--border); height: 10px; border-radius: 5px; overflow: hidden;">
            <div id="progress-bar" style="width: 0%; height: 100%; background: var(--accent); transition: width 0.2s;"></div>
        </div>
    </div>

    <div id="result-area" class="alert success" style="display: none; margin-top: 20px; flex-direction: column; align-items: flex-start;">
        <strong>File Ready! Share this link:</strong>
        <div style="display: flex; width: 100%; gap: 10px; margin-top: 10px;">
            <input type="text" id="share-link" class="form-control" readonly>
            <button id="copy-btn" class="btn-primary" style="width: auto;">Copy</button>
        </div>
        <p style="font-size: 0.8rem; margin-top: 10px;">Note: The decryption key is in the link (after the #). We cannot recover this file if you lose the link.</p>
    </div>
</div>

<style>
    .file-drop-area { border: 2px dashed var(--border); padding: 40px; text-align: center; border-radius: 12px; background: var(--bg-body); transition: 0.2s; }
    .file-drop-area:hover { border-color: var(--accent); background: var(--bg-card); }

    /* Only enhancement: pill shape + glow for the main upload button */
    #upload-btn {
        padding: 16px 32px;
        font-size: 1.1rem;
        font-weight: 700;
        border-radius: 50px !important; /* Full pill shape */
        box-shadow: 0 8px 20px rgba(99,102,241,0.3); /* Premium glow */
        transition: all 0.3s ease;
        margin-top: 20px;
    }

    #upload-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 12px 28px rgba(99,102,241,0.4);
    }

    /* Optional: also give Copy button the same pill + glow (consistent with suite) */
    #copy-btn {
        padding: 12px 28px;
        font-weight: 700;
        border-radius: 50px !important;
        box-shadow: 0 6px 16px rgba(99,102,241,0.3);
        transition: all 0.3s ease;
    }

    #copy-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 24px rgba(99,102,241,0.4);
    }
</style>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('file_share.static', filename='script.js') }}"></script>
{% endblock %}