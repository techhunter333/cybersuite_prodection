{% extends "base.html" %}

{% block header %}Classical Cipher Utility{% endblock %}
{% block content %}
    
    <div class="tool-wrapper" style="max-width: 700px;">
        
        <div style="text-align: center; margin-bottom: 30px;">
            <div style="font-size: 3rem; color: var(--accent); margin-bottom: 10px;"><i class="fas fa-scroll"></i></div>
            <h2>Classical Ciphers</h2>
            <p style="color: var(--text-muted);">Explore Caesar and Substitution Ciphers</p>
        </div>

        <div id="cipher-controls">
            <!-- Input Text -->
            <div class="form-group card-section">
                <label for="input-text">Input Text</label>
                <textarea id="input-text" class="form-control" rows="5" placeholder="Enter text..."></textarea>
            </div>

            <!-- Controls Grid -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                <div class="form-group card-section">
                    <label for="cipher-type">Cipher Type</label>
                    <select id="cipher-type" class="form-control styled-select">
                        <option value="caesar">Caesar Cipher</option>
                        <option value="substitution">Substitution Cipher</option>
                    </select>
                </div>
                <div class="form-group card-section">
                    <label for="operation-type">Operation</label>
                    <select id="operation-type" class="form-control styled-select">
                        <option value="encrypt">Encrypt</option>
                        <option value="decrypt">Decrypt</option>
                    </select>
                </div>
            </div>

            <!-- Caesar Key Options -->
            <div id="caesar-options" class="cipher-options-group card-section">
                <label for="caesar-shift">Shift Key (0-25)</label>
                <input type="number" id="caesar-shift" class="form-control" value="3" min="0" max="25">
            </div>

            <!-- Substitution Key Options -->
            <div id="substitution-options" class="cipher-options-group card-section" style="display: none;">
                <label for="substitution-key">Substitution Key</label>
                <input type="text" id="substitution-key" class="form-control" placeholder="26 unique uppercase letters" maxlength="26">
                <button type="button" id="generate-random-sub-key" class="btn-secondary" style="margin-top: 12px;">
                    <i class="fas fa-random"></i> Random Key
                </button>
            </div>
            
            <!-- Action Buttons -->
            <div style="display: flex; gap: 15px; margin: 30px 0;">
                <button type="button" id="process-btn" class="btn-primary" style="flex: 1; padding: 16px; font-size: 1.1rem;">
                    <i class="fas fa-cogs"></i> Process Text
                </button>
                <button type="button" id="swap-btn" class="btn-secondary" style="padding: 16px 24px;">
                    <i class="fas fa-exchange-alt"></i> Swap
                </button>
            </div>

            <!-- Output Area -->
            <div class="form-group card-section">
                <label for="output-text">Output Text</label>
                <div style="position: relative;">
                    <textarea id="output-text" class="form-control" rows="5" readonly></textarea>
                    <button type="button" id="copy-output-btn" class="copy-btn">
                        <i class="fas fa-copy"></i> Copy
                    </button>
                </div>
            </div>

            <div id="error-message" class="alert error" style="display: none;"></div>
        </div>
    </div>

    <!-- Enhanced CSS for this tool -->
    <style>
        /* Card-like sections with subtle shadow and rounding */
        .card-section {
            background: var(--bg-card);
            padding: 20px;
            border-radius: 16px;
            border: 1px solid var(--border);
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }

        /* Options groups (Caesar & Substitution) */
        .cipher-options-group {
            margin-bottom: 20px;
        }

        /* Styled selects to look more modern */
        .styled-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%23635fc7' viewBox='0 0 12 12'%3E%3Cpath d='M2 4l4 4 4-4z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 16px center;
            padding-right: 40px !important;
        }

        /* Primary button enhancements */
        #process-btn {
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(99, 95, 199, 0.3);
            transition: all 0.2s;
        }
        #process-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(99, 95, 199, 0.4);
        }

        /* Secondary button */
        .btn-secondary {
            background: transparent;
            color: var(--text-main);
            border: 2px solid var(--border);
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.2s;
        }
        .btn-secondary:hover {
            border-color: var(--accent);
            color: var(--accent);
            background: rgba(99, 95, 199, 0.05);
        }

        /* Copy button in output */
        .copy-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            background: white;
            color: var(--text-muted);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 8px 16px;
            font-size: 0.9rem;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            transition: all 0.2s;
        }
        .copy-btn:hover {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        /* Labels */
        .form-group label {
            font-weight: 600;
            color: var(--text-main);
            margin-bottom: 8px;
            display: block;
        }
    </style>
{% endblock %}

{% block scripts %}
    <script src="{{ url_for('cipher_tool.static', filename='script.js') }}"></script>
{% endblock %}